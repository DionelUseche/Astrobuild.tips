"use strict";var V=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var tt=V(D=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0});D.resolveRenameEditText=D.resolveRenameNewName=D.shouldReportDiagnostics=D.isSignatureHelpEnabled=D.isAutoInsertEnabled=D.isCompletionEnabled=D.isFormattingEnabled=D.isCodeActionsEnabled=D.isDiagnosticsEnabled=D.isDocumentLinkEnabled=D.isColorEnabled=D.isLinkedEditingEnabled=D.isSelectionRangesEnabled=D.isFoldingRangesEnabled=D.isSymbolsEnabled=D.isHighlightEnabled=D.isImplementationEnabled=D.isReferencesEnabled=D.isTypeDefinitionEnabled=D.isDefinitionEnabled=D.isRenameEnabled=D.isCallHierarchyEnabled=D.isSemanticTokensEnabled=D.isCodeLensEnabled=D.isInlayHintsEnabled=D.isHoverEnabled=void 0;function Bt(t){return!!t.semantic}D.isHoverEnabled=Bt;function Kt(t){return!!t.semantic}D.isInlayHintsEnabled=Kt;function Ut(t){return!!t.semantic}D.isCodeLensEnabled=Ut;function Xt(t){return typeof t.semantic=="object"?t.semantic.shouldHighlight?.()??!0:t.semantic}D.isSemanticTokensEnabled=Xt;function $t(t){return!!t.navigation}D.isCallHierarchyEnabled=$t;function Jt(t){return!!t.navigation}D.isRenameEnabled=Jt;function Qt(t){return!!t.navigation}D.isDefinitionEnabled=Qt;function Yt(t){return!!t.navigation}D.isTypeDefinitionEnabled=Yt;function Zt(t){return!!t.navigation}D.isReferencesEnabled=Zt;function Nt(t){return!!t.navigation}D.isImplementationEnabled=Nt;function en(t){return!!t.navigation}D.isHighlightEnabled=en;function tn(t){return t.structure}D.isSymbolsEnabled=tn;function nn(t){return t.structure}D.isFoldingRangesEnabled=nn;function rn(t){return t.structure}D.isSelectionRangesEnabled=rn;function sn(t){return t.structure}D.isLinkedEditingEnabled=sn;function on(t){return t.structure}D.isColorEnabled=on;function an(t){return t.structure}D.isDocumentLinkEnabled=an;function cn(t){return!!t.verification}D.isDiagnosticsEnabled=cn;function ln(t){return!!t.verification}D.isCodeActionsEnabled=ln;function un(t){return t.format}D.isFormattingEnabled=un;function fn(t){return!!t.completion}D.isCompletionEnabled=fn;function dn(t){return!!t.completion}D.isAutoInsertEnabled=dn;function gn(t){return!!t.completion}D.isSignatureHelpEnabled=gn;function pn(t){return typeof t.verification=="object"?t.verification.shouldReport?.()??!0:t.verification}D.shouldReportDiagnostics=pn;function hn(t,e){return typeof e.navigation=="object"?e.navigation.resolveRenameNewName?.(t)??t:t}D.resolveRenameNewName=hn;function mn(t,e){return typeof e.navigation=="object"?e.navigation.resolveRenameEditText?.(t)??t:t}D.resolveRenameEditText=mn});var nt=V(he=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});he.binarySearch=void 0;function bn(t,e){let n=0,i=t.length-1;for(;n<=i;){let r=Math.floor((n+i)/2),l=t[r];if(l<e)n=r+1;else if(l>e)i=r-1;else{n=r,i=r;break}}return Math.max(Math.min(n,i,t.length-1),0)}he.binarySearch=bn});var Le=V(X=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});X.getStack=X.track=X.resetOffsetStack=X.offsetStack=X.setTracking=void 0;var rt=!0,Re=0;function yn(t){rt=t}X.setTracking=yn;function En(){Re++}X.offsetStack=En;function vn(){Re--}X.resetOffsetStack=vn;function Sn(t,e=[]){return[new Proxy(t,{get(s,p,x){if(rt){if(p==="push")return n;if(p==="pop")return i;if(p==="shift")return r;if(p==="unshift")return l;if(p==="splice")return h;if(p==="sort")return o;if(p==="reverse")return a}return Reflect.get(s,p,x)}}),e];function n(...s){return e.push({stack:te(),length:s.length}),t.push(...s)}function i(){if(e.length){let s=e[e.length-1];s.length>1?s.length--:e.pop()}return t.pop()}function r(){if(e.length){let s=e[0];s.length>1?s.length--:e.shift()}return t.shift()}function l(...s){return e.unshift({stack:te(),length:s.length}),t.unshift(...s)}function h(s,p,...x){p===void 0&&(p=t.length-s);let E=0,F;for(let u=0;u<e.length;u++){let b=e[u],P=E;if(E=P+b.length,s>=P){F=u+1;let O=b.length;b.length=s-P,e.splice(F,0,{stack:b.stack,length:O-b.length});break}}if(F===void 0)throw new Error("Invalid splice operation");let S=p;for(let u=F;u<e.length;u++){let b=e[u];for(;S>0&&b.length>0;)b.length--,S--;if(S===0)break}return e.splice(F,0,{stack:te(),length:x.length}),t.splice(s,p,...x)}function o(s){return e.splice(0,e.length,{stack:te(),length:t.length}),t.sort(s)}function a(){return e.splice(0,e.length,{stack:te(),length:t.length}),t.reverse()}}X.track=Sn;function te(){let e=new Error().stack.split(`
`)[3+Re].trim();return e.endsWith(")")?e=e.slice(e.lastIndexOf("(")+1,-1):e=e.slice(e.lastIndexOf(" ")+1),e}X.getStack=te});var st=V(it=>{"use strict";Object.defineProperty(it,"__esModule",{value:!0})});var dt=V(G=>{"use strict";var xn=G&&G.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),at=G&&G.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&xn(e,t,n)};Object.defineProperty(G,"__esModule",{value:!0});G.replaceRange=G.replaceSourceRange=G.replaceAll=G.replace=G.create=G.toString=G.getLength=void 0;var ot=nt(),Q=Le();at(st(),G);at(Le(),G);function ct(t){let e=0;for(let n of t)e+=typeof n=="string"?n.length:n[0].length;return e}G.getLength=ct;function Ie(t){return t.map(e=>typeof e=="string"?e:e[0]).join("")}G.toString=Ie;function Cn(t){return[[t,void 0,0]]}G.create=Cn;function _n(t,e,...n){let r=Ie(t).match(e);if(r&&r.index!==void 0){let l=r.index,h=l+r[0].length;(0,Q.offsetStack)(),je(t,l,h,...n.map(o=>typeof o=="function"?o(r[0]):o)),(0,Q.resetOffsetStack)()}}G.replace=_n;function Mn(t,e,...n){let i=Ie(t),r=i.matchAll(e),l=i.length,h=0;for(let o of r)if(o.index!==void 0){let a=o.index+h,s=a+o[0].length;(0,Q.offsetStack)(),je(t,a,s,...n.map(x=>typeof x=="function"?x(o[0]):x)),(0,Q.resetOffsetStack)();let p=ct(t);h+=p-l,l=p}}G.replaceAll=Mn;function Fn(t,e,n,i,...r){for(let l of t)if(typeof l!="string"&&l[1]===e){let h=l[2],o=l[2]+l[0].length;if(h<=n&&o>=i){let a=[];n>h&&a.push(ut(l,n-h));for(let s of r)a.push(s);return i<o&&a.push(ft(l,i-o)),lt(a),(0,Q.offsetStack)(),t.splice(t.indexOf(l),1,...a),(0,Q.resetOffsetStack)(),!0}}return!1}G.replaceSourceRange=Fn;function je(t,e,n,...i){let r=On(t),l=(0,ot.binarySearch)(r,e),h=(0,ot.binarySearch)(r,n),o=t[l],a=t[h],s=r[l],p=r[h],x=r[h]+(typeof a=="string"?a.length:a[0].length),E=[];e>s&&E.push(ut(o,e-s));for(let F of i)E.push(F);n<x&&E.push(ft(a,n-p)),lt(E),(0,Q.offsetStack)(),t.splice(l,h-l+1,...E),(0,Q.resetOffsetStack)()}G.replaceRange=je;function lt(t){for(let e=t.length-1;e>=1;e--)typeof t[e]=="string"&&typeof t[e-1]=="string"&&(t[e-1]=t[e-1]+t[e],(0,Q.offsetStack)(),t.splice(e,1),(0,Q.resetOffsetStack)())}function ut(t,e){return typeof t=="string"?t.slice(0,e):[t[0].slice(0,e),...t.slice(1)]}function ft(t,e){return typeof t=="string"?t.slice(e):(e<0&&(e+=t[0].length),[t[0].slice(e),t[1],t[2]+e,...t.slice(3)])}function On(t){let e=[],n=0;for(let i of t)e.push(n),n+=typeof i=="string"?i.length:i[0].length;return e}});var gt=V(me=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0});me.binarySearch=void 0;function An(t,e){let n=0,i=t.length-1,r;for(;n<=i;){let o=Math.floor((n+i)/2),a=t[o];if(a<e)n=o+1;else if(a>e)i=o-1;else{n=o,i=o,r=o;break}}let l=Math.max(Math.min(n,i,t.length-1),0),h=Math.min(Math.max(n,i,0),t.length-1);return{low:l,high:h,match:r}}me.binarySearch=An});var ke=V(be=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0});be.translateOffset=void 0;function Dn(t,e,n,i){for(let r=0;r<e.length;r++){let l=e[r],h=n[r],o=i[r];if(t>=l&&t<=l+o)return h+t-l}}be.translateOffset=Dn});var pt=V(ye=>{"use strict";Object.defineProperty(ye,"__esModule",{value:!0});ye.SourceMap=void 0;var qe=gt(),wn=ke(),Ve=class{constructor(e){this.mappings=e}getSourceOffset(e){for(let n of this.findMatching(e,"generatedOffsets","sourceOffsets"))return n}getGeneratedOffset(e){for(let n of this.findMatching(e,"sourceOffsets","generatedOffsets"))return n}getSourceOffsets(e){return this.findMatching(e,"generatedOffsets","sourceOffsets")}getGeneratedOffsets(e){return this.findMatching(e,"sourceOffsets","generatedOffsets")}*findMatching(e,n,i){let r=this.getMemoBasedOnRange(n);if(r.offsets.length===0)return;let{low:l,high:h}=(0,qe.binarySearch)(r.offsets,e),o=new Set;for(let a=l;a<=h;a++)for(let s of r.mappings[a]){if(o.has(s))continue;o.add(s);let p=(0,wn.translateOffset)(e,s[n],s[i],s.lengths);p!==void 0&&(yield[p,s])}}getMemoBasedOnRange(e){return e==="sourceOffsets"?this.sourceCodeOffsetsMemo??=this.createMemo("sourceOffsets"):this.generatedCodeOffsetsMemo??=this.createMemo("generatedOffsets")}createMemo(e){let n=new Set;for(let l of this.mappings)for(let h=0;h<l[e].length;h++)n.add(l[e][h]),n.add(l[e][h]+l.lengths[h]);let i=[...n].sort((l,h)=>l-h),r=i.map(()=>new Set);for(let l of this.mappings)for(let h=0;h<l[e].length;h++){let o=(0,qe.binarySearch)(i,l[e][h]).match,a=(0,qe.binarySearch)(i,l[e][h]+l.lengths[h]).match;for(let s=o;s<=a;s++)r[s].add(l)}return{offsets:i,mappings:r}}};ye.SourceMap=Ve});var ht=V(Ee=>{"use strict";Object.defineProperty(Ee,"__esModule",{value:!0});Ee.buildMappings=void 0;function Pn(t){let e=0,n=[];for(let i of t)typeof i=="string"?e+=i.length:(n.push({source:i[1],sourceOffsets:[i[2]],generatedOffsets:[e],lengths:[i[0].length],data:i[3]}),e+=i[0].length);return n}Ee.buildMappings=Pn});var mt=V(ve=>{"use strict";Object.defineProperty(ve,"__esModule",{value:!0});ve.buildStacks=void 0;function Tn(t,e){let n=0,i=0,r=[];for(let l of e){let h=n;for(let o=0;o<l.length;o++){let a=t[i+o];typeof a=="string"?n+=a.length:n+=a[0].length}i+=l.length,r.push({source:l.stack,range:[h,n]})}return r}ve.buildStacks=Tn});var Se=V($=>{"use strict";var Rn=$&&$.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),ge=$&&$.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Rn(e,t,n)};Object.defineProperty($,"__esModule",{value:!0});ge(dt(),$);ge(pt(),$);ge(ke(),$);ge(ht(),$);ge(mt(),$)});var Ge=V(xe=>{"use strict";Object.defineProperty(xe,"__esModule",{value:!0});xe.LinkedCodeMap=void 0;var Ln=Se(),He=class extends Ln.SourceMap{*getLinkedOffsets(e){for(let n of this.getGeneratedOffsets(e))yield n[0];for(let n of this.getSourceOffsets(e))yield n[0]}};xe.LinkedCodeMap=He});var ze=V(Ce=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0});Ce.FileMap=void 0;var We=class extends Map{constructor(e){super(),this.caseSensitive=e,this.originalFileNames=new Map}keys(){return this.originalFileNames.values()}get(e){return super.get(this.normalizeId(e))}has(e){return super.has(this.normalizeId(e))}set(e,n){return this.originalFileNames.set(this.normalizeId(e),e),super.set(this.normalizeId(e),n)}delete(e){return this.originalFileNames.delete(this.normalizeId(e)),super.delete(this.normalizeId(e))}clear(){return this.originalFileNames.clear(),super.clear()}normalizeId(e){return this.caseSensitive?e:e.toLowerCase()}};Ce.FileMap=We});var yt=V(Z=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});Z.forEachEmbeddedCode=Z.updateVirtualCodeMaps=Z.createFileRegistry=void 0;var In=Se(),jn=Ge(),kn=ze();function qn(t,e,n){let i=new kn.FileMap(e),r=new WeakMap,l=new WeakMap,h=new WeakMap;return{languagePlugins:t,set(o,a,s,p=t){let x=i.get(o);if(x){if(x.languageId!==a)return this.delete(o),this.set(o,a,s);if(x.snapshot!==s){if(x.snapshot=s,x.generated){x.generated.code=x.generated.languagePlugin.updateVirtualCode(o,x.generated.code,s,this);for(let F of pe(x.generated.code))r.set(F,x)}return x}else return x}let E={id:o,languageId:a,snapshot:s};i.set(o,E);for(let F of p){let S=F.createVirtualCode(o,a,s,this);if(S){E.generated={code:S,languagePlugin:F};for(let u of pe(S))r.set(u,E);break}}return E},delete(o){let a=i.get(o);a&&(a.generated&&a.generated.languagePlugin.disposeVirtualCode?.(o,a.generated.code,this),i.delete(o))},get(o){return n(o),i.get(o)},getByVirtualCode(o){return r.get(o)},getLinkedCodeMap(o){return h.has(o.snapshot)||h.set(o.snapshot,o.linkedCodeMappings?new jn.LinkedCodeMap(o.linkedCodeMappings):void 0),h.get(o.snapshot)},getMaps(o){return l.has(o.snapshot)||l.set(o.snapshot,new Map),bt(o,a=>{if(a){let s=i.get(a);return[a,s.snapshot]}else{let s=r.get(o);return[s.id,s.snapshot]}},l.get(o.snapshot)),l.get(o.snapshot)},getVirtualCode(o,a){let s=this.get(o);if(s?.generated){for(let p of pe(s.generated.code))if(p.id===a)return[p,s]}return[void 0,void 0]}}}Z.createFileRegistry=qn;function bt(t,e,n=new Map){let i=new Set;for(let r of t.mappings){if(i.has(r.source))continue;i.add(r.source);let l=e(r.source);l&&(!n.has(l[0])||n.get(l[0])[0]!==l[1])&&n.set(l[0],[l[1],new In.SourceMap(t.mappings.filter(h=>h.source===r.source))])}return n}Z.updateVirtualCodeMaps=bt;function*pe(t){if(yield t,t.embeddedCodes)for(let e of t.embeddedCodes)yield*pe(e)}Z.forEachEmbeddedCode=pe});var vt=V(Et=>{"use strict";Object.defineProperty(Et,"__esModule",{value:!0})});var re=V(K=>{"use strict";var Vn=K&&K.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),ne=K&&K.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Vn(e,t,n)};Object.defineProperty(K,"__esModule",{value:!0});K.resolveCommonLanguageId=void 0;ne(tt(),K);ne(yt(),K);ne(Ge(),K);ne(vt(),K);ne(ze(),K);ne(Se(),K);function Hn(t){let e=t.split(".").pop();switch(e){case"js":return"javascript";case"cjs":return"javascript";case"mjs":return"javascript";case"ts":return"typescript";case"cts":return"typescript";case"mts":return"typescript";case"jsx":return"javascriptreact";case"tsx":return"typescriptreact";case"pug":return"jade";case"md":return"markdown"}return e}K.resolveCommonLanguageId=Hn});var xt=V(ie=>{"use strict";Object.defineProperty(ie,"__esModule",{value:!0});ie.dedupeDocumentSpans=ie.dedupeReferencedSymbols=void 0;function Gn(t){return St(t,e=>[e.definition.fileName,e.definition.textSpan.start,e.definition.textSpan.length].join(":"))}ie.dedupeReferencedSymbols=Gn;function Wn(t){return St(t,e=>[e.fileName,e.textSpan.start,e.textSpan.length].join(":"))}ie.dedupeDocumentSpans=Wn;function St(t,e){let n=new Map;for(let i of t.reverse())n.set(e(i),i);return[...n.values()]}});var Be=V(se=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0});se.getVirtualFileAndMap=se.notEmpty=void 0;function zn(t){return t!=null}se.notEmpty=zn;function Bn(t,e){let n=t.get(e);if(n?.generated){let i=n.generated.languagePlugin.typescript?.getScript(n.generated.code);if(i){for(let r of t.getMaps(i.code))if(r[1][0]===n.snapshot)return[i,n,r[1][1]]}}return[void 0,void 0,void 0]}se.getVirtualFileAndMap=Bn});var _t=V(W=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0});W.toGeneratedOffset=W.toSourceOffset=W.transformTextSpan=W.transformTextChange=W.transformSpan=W.transformDocumentSpan=W.transformFileTextChanges=W.transformDiagnostic=W.transformCallHierarchyItem=void 0;var Kn=re(),ae=Be(),oe=new WeakMap;function Un(t,e,n){let i=N(t,e.file,e.span,n),r=N(t,e.file,e.selectionSpan,n);return{...e,span:i?.textSpan??{start:0,length:0},selectionSpan:r?.textSpan??{start:0,length:0}}}W.transformCallHierarchyItem=Un;function Ct(t,e){if(!oe.has(e)){oe.set(e,void 0);let{relatedInformation:n}=e;if(n&&(e.relatedInformation=n.map(i=>Ct(t,i)).filter(ae.notEmpty)),e.file!==void 0&&e.start!==void 0&&e.length!==void 0){let[i,r,l]=(0,ae.getVirtualFileAndMap)(t,e.file.fileName);if(i){let h=_e(r,l,{start:e.start,length:e.length},Kn.shouldReportDiagnostics);h&&oe.set(e,{...e,start:h.start,length:h.length})}else oe.set(e,e)}else oe.set(e,e)}return oe.get(e)}W.transformDiagnostic=Ct;function Xn(t,e,n){let[i,r]=(0,ae.getVirtualFileAndMap)(t,e.fileName);return r?{...e,textChanges:e.textChanges.map(l=>{let h=N(t,e.fileName,l.span,n);if(h)return{...l,span:h.textSpan}}).filter(ae.notEmpty)}:e}W.transformFileTextChanges=Xn;function $n(t,e,n,i){let r=N(t,e.fileName,e.textSpan,n);if(!r&&i){let[a]=(0,ae.getVirtualFileAndMap)(t,e.fileName);a&&(r={fileName:e.fileName,textSpan:{start:0,length:0}})}if(!r)return;let l=N(t,e.fileName,e.contextSpan,n),h=N(t,e.originalFileName,e.originalTextSpan,n),o=N(t,e.originalFileName,e.originalContextSpan,n);return{...e,fileName:r.fileName,textSpan:r.textSpan,contextSpan:l?.textSpan,originalFileName:h?.fileName,originalTextSpan:h?.textSpan,originalContextSpan:o?.textSpan}}W.transformDocumentSpan=$n;function N(t,e,n,i){if(!e||!n)return;let[r,l,h]=(0,ae.getVirtualFileAndMap)(t,e);if(r){let o=_e(l,h,n,i);if(o)return{fileName:e,textSpan:o}}else return{fileName:e,textSpan:n}}W.transformSpan=N;function Jn(t,e,n,i){let r=_e(t,e,n.span,i);if(r)return{newText:n.newText,span:r}}W.transformTextChange=Jn;function _e(t,e,n,i){let r=n.start,l=n.start+n.length,h=Ke(t,e,r,i),o=Ke(t,e,l,i);if(h!==void 0&&o!==void 0&&o>=h)return{start:h,length:o-h}}W.transformTextSpan=_e;function Ke(t,e,n,i){for(let[r,l]of e.getSourceOffsets(n-t.snapshot.getLength()))if(i(l.data))return r}W.toSourceOffset=Ke;function Qn(t,e,n,i){for(let[r,l]of e.getGeneratedOffsets(n))if(i(l.data))return r+t.snapshot.getLength()}W.toGeneratedOffset=Qn});var Mt=V(Me=>{"use strict";Object.defineProperty(Me,"__esModule",{value:!0});Me.decorateLanguageService=void 0;var M=re(),ee=xt(),T=Be(),w=_t();function Yn(t,e){let{getNavigationTree:n,getOutliningSpans:i}=e;e.getNavigationTree=c=>{let[d]=(0,T.getVirtualFileAndMap)(t,c);if(d){let y=n(c);return y.childItems=void 0,y}else return n(c)},e.getOutliningSpans=c=>{let[d]=(0,T.getVirtualFileAndMap)(t,c);return d?[]:i(c)};let{findReferences:r,findRenameLocations:l,getCompletionEntryDetails:h,getCompletionsAtPosition:o,getDefinitionAndBoundSpan:a,getDefinitionAtPosition:s,getFileReferences:p,getFormattingEditsForDocument:x,getFormattingEditsForRange:E,getFormattingEditsAfterKeystroke:F,getImplementationAtPosition:S,getLinkedEditingRangeAtPosition:u,getQuickInfoAtPosition:b,getReferencesAtPosition:P,getSemanticDiagnostics:j,getSyntacticDiagnostics:O,getSuggestionDiagnostics:I,getTypeDefinitionAtPosition:A,getEncodedSemanticClassifications:H,getDocumentHighlights:k,getApplicableRefactors:z,getEditsForFileRename:U,getEditsForRefactor:J,getRenameInfo:Ue,getCodeFixesAtPosition:Xe,prepareCallHierarchy:$e,provideCallHierarchyIncomingCalls:Je,provideCallHierarchyOutgoingCalls:Qe,provideInlayHints:Ye,organizeImports:Wt}=e;e.getFormattingEditsForDocument=(c,d)=>{let[y,C,m]=(0,T.getVirtualFileAndMap)(t,c);return y?m.mappings.some(f=>(0,M.isFormattingEnabled)(f.data))?x(c,d).map(f=>(0,w.transformTextChange)(C,m,f,M.isFormattingEnabled)).filter(T.notEmpty):[]:x(c,d)},e.getFormattingEditsForRange=(c,d,y,C)=>{let[m,g,f]=(0,T.getVirtualFileAndMap)(t,c);if(m){let v=(0,w.toGeneratedOffset)(g,f,d,M.isFormattingEnabled),R=(0,w.toGeneratedOffset)(g,f,y,M.isFormattingEnabled);return v!==void 0&&R!==void 0?E(c,v,R,C).map(_=>(0,w.transformTextChange)(g,f,_,M.isFormattingEnabled)).filter(T.notEmpty):[]}else return E(c,d,y,C)},e.getFormattingEditsAfterKeystroke=(c,d,y,C)=>{let[m,g,f]=(0,T.getVirtualFileAndMap)(t,c);if(m){let v=(0,w.toGeneratedOffset)(g,f,d,M.isFormattingEnabled);return v!==void 0?F(c,v,y,C).map(q=>(0,w.transformTextChange)(g,f,q,M.isFormattingEnabled)).filter(T.notEmpty):[]}else return F(c,d,y,C)},e.getEditsForFileRename=(c,d,y,C)=>U(c,d,y,C).map(g=>(0,w.transformFileTextChanges)(t,g,M.isRenameEnabled)).filter(T.notEmpty),e.getLinkedEditingRangeAtPosition=(c,d)=>{let[y,C,m]=(0,T.getVirtualFileAndMap)(t,c);if(y){let g=(0,w.toGeneratedOffset)(C,m,d,M.isLinkedEditingEnabled);if(g!==void 0){let f=u(c,g);if(f)return{ranges:f.ranges.map(v=>(0,w.transformTextSpan)(C,m,v,M.isLinkedEditingEnabled)).filter(T.notEmpty),wordPattern:f.wordPattern}}}else return u(c,d)},e.prepareCallHierarchy=(c,d)=>{let[y,C,m]=(0,T.getVirtualFileAndMap)(t,c);if(y){let g=(0,w.toGeneratedOffset)(C,m,d,M.isCallHierarchyEnabled);if(g!==void 0){let f=$e(c,g);if(Array.isArray(f))return f.map(v=>(0,w.transformCallHierarchyItem)(t,v,M.isCallHierarchyEnabled));if(f)return(0,w.transformCallHierarchyItem)(t,f,M.isCallHierarchyEnabled)}}else return $e(c,d)},e.provideCallHierarchyIncomingCalls=(c,d)=>{let y=[],[C,m,g]=(0,T.getVirtualFileAndMap)(t,c);if(C){let f=(0,w.toGeneratedOffset)(m,g,d,M.isCallHierarchyEnabled);f!==void 0&&(y=Je(c,f))}else y=Je(c,d);return y.map(f=>{let v=(0,w.transformCallHierarchyItem)(t,f.from,M.isCallHierarchyEnabled),R=f.fromSpans.map(q=>(0,w.transformSpan)(t,f.from.file,q,M.isCallHierarchyEnabled)?.textSpan).filter(T.notEmpty);return{from:v,fromSpans:R}})},e.provideCallHierarchyOutgoingCalls=(c,d)=>{let y=[],[C,m,g]=(0,T.getVirtualFileAndMap)(t,c);if(C){let f=(0,w.toGeneratedOffset)(m,g,d,M.isCallHierarchyEnabled);f!==void 0&&(y=Qe(c,f))}else y=Qe(c,d);return y.map(f=>{let v=(0,w.transformCallHierarchyItem)(t,f.to,M.isCallHierarchyEnabled),R=f.fromSpans.map(q=>m?(0,w.transformTextSpan)(m,g,q,M.isCallHierarchyEnabled):q).filter(T.notEmpty);return{to:v,fromSpans:R}})},e.organizeImports=(c,d,y)=>Wt(c,d,y).map(g=>(0,w.transformFileTextChanges)(t,g,M.isCodeActionsEnabled)).filter(T.notEmpty),e.getQuickInfoAtPosition=(c,d)=>{let[y,C,m]=(0,T.getVirtualFileAndMap)(t,c);if(y){let g=(0,w.toGeneratedOffset)(C,m,d,M.isHoverEnabled);if(g!==void 0){let f=b(c,g);if(f){let v=(0,w.transformTextSpan)(C,m,f.textSpan,M.isHoverEnabled);if(v)return{...f,textSpan:v}}}}else return b(c,d)},e.getDocumentHighlights=(c,d,y)=>Y(c,d,M.isHighlightEnabled,g=>k(c,g,y),function*(g){for(let f of g)for(let v of f.highlightSpans)yield[v.fileName??f.fileName,v.textSpan.start]}).flat().map(g=>({...g,highlightSpans:g.highlightSpans.map(f=>{let v=(0,w.transformSpan)(t,f.fileName??g.fileName,f.textSpan,M.isHighlightEnabled)?.textSpan;if(v)return{...f,contextSpan:(0,w.transformSpan)(t,f.fileName??g.fileName,f.contextSpan,M.isHighlightEnabled)?.textSpan,textSpan:v}}).filter(T.notEmpty)})),e.getApplicableRefactors=(c,d,y,C,m,g)=>{let[f,v,R]=(0,T.getVirtualFileAndMap)(t,c);if(f){let q=(0,w.toGeneratedOffset)(v,R,typeof d=="number"?d:d.pos,M.isCodeActionsEnabled);if(q!==void 0){let _=typeof d=="number"?q:{pos:q,end:q+d.end-d.pos};return z(c,_,y,C,m,g)}return[]}else return z(c,d,y,C,m,g)},e.getEditsForRefactor=(c,d,y,C,m,g)=>{let f,[v,R,q]=(0,T.getVirtualFileAndMap)(t,c);if(v){let _=(0,w.toGeneratedOffset)(R,q,typeof y=="number"?y:y.pos,M.isCodeActionsEnabled);if(_!==void 0){let L=typeof y=="number"?_:{pos:_,end:_+y.end-y.pos};f=J(c,d,L,C,m,g)}}else f=J(c,d,y,C,m,g);if(f)return f.edits=f.edits.map(_=>(0,w.transformFileTextChanges)(t,_,M.isCodeActionsEnabled)).filter(T.notEmpty),f},e.getRenameInfo=(c,d,y)=>{let[C,m,g]=(0,T.getVirtualFileAndMap)(t,c);if(C){let f=(0,w.toGeneratedOffset)(m,g,d,M.isRenameEnabled);if(f!==void 0){let v=Ue(c,f,y);if(v.canRename){let R=(0,w.transformTextSpan)(m,g,v.triggerSpan,M.isRenameEnabled);if(R)return v.triggerSpan=R,v}else return v}return{canRename:!1,localizedErrorMessage:"Failed to get rename locations"}}else return Ue(c,d,y)},e.getCodeFixesAtPosition=(c,d,y,C,m,g)=>{let f=[],[v,R,q]=(0,T.getVirtualFileAndMap)(t,c);if(v){let _=(0,w.toGeneratedOffset)(R,q,d,M.isCodeActionsEnabled),L=(0,w.toGeneratedOffset)(R,q,y,M.isCodeActionsEnabled);_!==void 0&&L!==void 0&&(f=Xe(c,_,L,C,m,g))}else f=Xe(c,d,y,C,m,g);return f=f.map(_=>(_.changes=_.changes.map(L=>(0,w.transformFileTextChanges)(t,L,M.isCodeActionsEnabled)).filter(T.notEmpty),_)),f},e.getEncodedSemanticClassifications=(c,d,y)=>{let[C,m,g]=(0,T.getVirtualFileAndMap)(t,c);if(C){let f,v;for(let _ of g.mappings)(0,M.isSemanticTokensEnabled)(_.data)&&_.sourceOffsets[0]>=d.start&&_.sourceOffsets[0]<=d.start+d.length&&(f??=_.generatedOffsets[0],v??=_.generatedOffsets[_.generatedOffsets.length-1]+_.lengths[_.lengths.length-1],f=Math.min(f,_.generatedOffsets[0]),v=Math.max(v,_.generatedOffsets[_.generatedOffsets.length-1]+_.lengths[_.lengths.length-1]));f??=0,v??=m.snapshot.getLength(),f+=m.snapshot.getLength(),v+=m.snapshot.getLength();let R=H(c,{start:f,length:v-f},y),q=[];for(let _=0;_<R.spans.length;_+=3){let L=(0,w.toSourceOffset)(m,g,R.spans[_],M.isSemanticTokensEnabled),B=(0,w.toSourceOffset)(m,g,R.spans[_]+R.spans[_+1],M.isSemanticTokensEnabled);L!==void 0&&B!==void 0&&q.push(L,B-L,R.spans[_+2])}return R.spans=q,R}else return H(c,d,y)},e.getSyntacticDiagnostics=c=>O(c).map(d=>(0,w.transformDiagnostic)(t,d)).filter(T.notEmpty),e.getSemanticDiagnostics=c=>j(c).map(d=>(0,w.transformDiagnostic)(t,d)).filter(T.notEmpty),e.getSuggestionDiagnostics=c=>I(c).map(d=>(0,w.transformDiagnostic)(t,d)).filter(T.notEmpty),e.getDefinitionAndBoundSpan=(c,d)=>{let y=Y(c,d,M.isDefinitionEnabled,g=>a(c,g),function*(g){for(let f of g.definitions??[])yield[f.fileName,f.textSpan.start]}),C=y.map(g=>(0,w.transformSpan)(t,c,g.textSpan,M.isDefinitionEnabled)?.textSpan).filter(T.notEmpty)[0];if(!C)return;let m=y.map(g=>g.definitions?.map(f=>(0,w.transformDocumentSpan)(t,f,M.isDefinitionEnabled,f.fileName!==c)).filter(T.notEmpty)).filter(T.notEmpty).flat();return{textSpan:C,definitions:(0,ee.dedupeDocumentSpans)(m)}},e.findReferences=(c,d)=>{let C=Y(c,d,M.isReferencesEnabled,m=>r(c,m),function*(m){for(let g of m)for(let f of g.references)yield[f.fileName,f.textSpan.start]}).flat().map(m=>{let g=(0,w.transformDocumentSpan)(t,m.definition,M.isDefinitionEnabled);if(g)return{definition:g,references:m.references.map(f=>(0,w.transformDocumentSpan)(t,f,M.isReferencesEnabled)).filter(T.notEmpty)}}).filter(T.notEmpty);return(0,ee.dedupeReferencedSymbols)(C)},e.getDefinitionAtPosition=(c,d)=>{let C=Y(c,d,M.isDefinitionEnabled,m=>s(c,m),function*(m){for(let g of m)yield[g.fileName,g.textSpan.start]}).flat().map(m=>(0,w.transformDocumentSpan)(t,m,M.isDefinitionEnabled,m.fileName!==c)).filter(T.notEmpty);return(0,ee.dedupeDocumentSpans)(C)},e.getTypeDefinitionAtPosition=(c,d)=>{let C=Y(c,d,M.isTypeDefinitionEnabled,m=>A(c,m),function*(m){for(let g of m)yield[g.fileName,g.textSpan.start]}).flat().map(m=>(0,w.transformDocumentSpan)(t,m,M.isTypeDefinitionEnabled)).filter(T.notEmpty);return(0,ee.dedupeDocumentSpans)(C)},e.getImplementationAtPosition=(c,d)=>{let C=Y(c,d,M.isImplementationEnabled,m=>S(c,m),function*(m){for(let g of m)yield[g.fileName,g.textSpan.start]}).flat().map(m=>(0,w.transformDocumentSpan)(t,m,M.isImplementationEnabled)).filter(T.notEmpty);return(0,ee.dedupeDocumentSpans)(C)},e.findRenameLocations=(c,d,y,C,m)=>{let f=Y(c,d,M.isRenameEnabled,v=>l(c,v,y,C,m),function*(v){for(let R of v)yield[R.fileName,R.textSpan.start]}).flat().map(v=>(0,w.transformDocumentSpan)(t,v,M.isRenameEnabled)).filter(T.notEmpty);return(0,ee.dedupeDocumentSpans)(f)},e.getReferencesAtPosition=(c,d)=>{let C=Y(c,d,M.isReferencesEnabled,m=>P(c,m),function*(m){for(let g of m)yield[g.fileName,g.textSpan.start]}).flat().map(m=>(0,w.transformDocumentSpan)(t,m,M.isReferencesEnabled)).filter(T.notEmpty);return(0,ee.dedupeDocumentSpans)(C)},e.getCompletionsAtPosition=(c,d,y,C)=>{let[m,g,f]=(0,T.getVirtualFileAndMap)(t,c);if(m){let v,R=[],q,_=(0,w.toGeneratedOffset)(g,f,d,L=>!(!(0,M.isCompletionEnabled)(L)||(q=typeof L.completion=="object"&&L.completion.isAdditional,!q&&v)));if(_!==void 0){let L=o(c,_,y,C);if(L){for(let B of L.entries)B.replacementSpan=B.replacementSpan&&(0,w.transformTextSpan)(g,f,B.replacementSpan,M.isCompletionEnabled);L.optionalReplacementSpan=L.optionalReplacementSpan&&(0,w.transformTextSpan)(g,f,L.optionalReplacementSpan,M.isCompletionEnabled),q?R.push(L):v=L}}if(!v&&R.length&&(v=R.shift()),v)return{...v,entries:[...v.entries,...R.map(L=>L.entries).flat()]}}else return o(c,d,y,C)},e.getCompletionEntryDetails=(c,d,y,C,m,g,f)=>{let v,[R,q,_]=(0,T.getVirtualFileAndMap)(t,c);if(R){let L=(0,w.toGeneratedOffset)(q,_,d,M.isCompletionEnabled);L!==void 0&&(v=h(c,L,y,C,m,g,f))}else return h(c,d,y,C,m,g,f);if(v?.codeActions)for(let L of v.codeActions)L.changes=L.changes.map(B=>(0,w.transformFileTextChanges)(t,B,M.isCompletionEnabled)).filter(T.notEmpty);return v},e.provideInlayHints=(c,d,y)=>{let[C,m,g]=(0,T.getVirtualFileAndMap)(t,c);if(C){let f,v;for(let _ of g.mappings)(0,M.isInlayHintsEnabled)(_.data)&&_.sourceOffsets[0]>=d.start&&_.sourceOffsets[0]<=d.start+d.length&&(f??=_.generatedOffsets[0],v??=_.generatedOffsets[_.generatedOffsets.length-1],f=Math.min(f,_.generatedOffsets[0]),v=Math.max(v,_.generatedOffsets[_.generatedOffsets.length-1]));(f===void 0||v===void 0)&&(f=0,v=0),f+=m.snapshot.getLength(),v+=m.snapshot.getLength();let R=Ye(c,{start:f,length:v-f},y),q=[];for(let _ of R){let L=(0,w.toSourceOffset)(m,g,_.position,M.isInlayHintsEnabled);L!==void 0&&q.push({..._,position:L})}return q}else return Ye(c,d,y)},e.getFileReferences=c=>{let y=p(c).map(C=>(0,w.transformDocumentSpan)(t,C,M.isReferencesEnabled)).filter(T.notEmpty);return(0,ee.dedupeDocumentSpans)(y)};function Y(c,d,y,C,m){let g=[],f=new Set,[v,R,q]=(0,T.getVirtualFileAndMap)(t,c);if(v)for(let[L,B]of q.getGeneratedOffsets(d))y(B.data)&&_(c,L+R.snapshot.getLength());else _(c,d);return g;function _(L,B){if(f.has(L+":"+B))return;f.add(L+":"+B);let Te=C(B);if(Te){g=g.concat(Te);for(let de of m(Te)){f.add(de[0]+":"+de[1]);let[Ze,Ne]=(0,T.getVirtualFileAndMap)(t,de[0]);if(!Ze)continue;let et=t.getLinkedCodeMap(Ze.code);if(et)for(let zt of et.getLinkedOffsets(de[1]-Ne.snapshot.getLength()))_(de[0],zt+Ne.snapshot.getLength())}}}}}Me.decorateLanguageService=Yn});var Ft=V(Fe=>{"use strict";Object.defineProperty(Fe,"__esModule",{value:!0});Fe.createResolveModuleName=void 0;function Zn(t,e,n,i){let r=new Map,l={readFile:e.readFile.bind(e),directoryExists:e.directoryExists?.bind(e),realpath:e.realpath?.bind(e),getCurrentDirectory:e.getCurrentDirectory.bind(e),getDirectories:e.getDirectories?.bind(e),useCaseSensitiveFileNames:e.useCaseSensitiveFileNames?.bind(e),fileExists(o){for(let{typescript:a}of n)if(a){for(let{extension:s}of a.extraFileExtensions)if(o.endsWith(`.d.${s}.ts`)){let p=o.slice(0,-`.d.${s}.ts`.length)+`.${s}`;if(h(p))return r.set(o,p),!0}}return e.fileExists(o)}};return(o,a,s,p,x,E)=>{let F=t.resolveModuleName(o,a,s,l,p,x,E);if(F.resolvedModule&&r.has(F.resolvedModule.resolvedFileName)){F.resolvedModule.resolvedFileName=r.get(F.resolvedModule.resolvedFileName);let S=i(F.resolvedModule.resolvedFileName);if(S?.generated){let u=S.generated.languagePlugin.typescript?.getScript(S.generated.code);u&&(F.resolvedModule.extension=u.extension)}}return r.clear(),F};function h(o){return e.fileExists(o)?(t.sys.getFileSize?.(o)??e.readFile(o)?.length??0)<4*1024*1024:!1}}Fe.createResolveModuleName=Zn});var Ot=V(ce=>{"use strict";Object.defineProperty(ce,"__esModule",{value:!0});ce.searchExternalFiles=ce.decorateLanguageServiceHost=void 0;var Nn=re(),er=Ft();function tr(t,e,n){let i=0,{languagePlugins:r}=t,l=r.map(S=>S.typescript?.extraFileExtensions.map(u=>"."+u.extension)??[]).flat(),h=new Map,o=e.readDirectory?.bind(e),a=e.resolveModuleNameLiterals?.bind(e),s=e.resolveModuleNames?.bind(e),p=e.getProjectVersion?.bind(e),x=e.getScriptSnapshot.bind(e),E=e.getScriptKind?.bind(e);if(o&&(e.readDirectory=(S,u,b,P,j)=>{if(u)for(let O of l)u.includes(O)||(u=[...u,...O]);return o(S,u,b,P,j)}),r.some(S=>S.typescript?.extraFileExtensions.length)){let S=(0,er.createResolveModuleName)(n,e,r,u=>t.get(u));a&&(e.resolveModuleNameLiterals=(u,b,P,j,...O)=>u.every(I=>!l.some(A=>I.text.endsWith(A)))?a(u,b,P,j,...O):u.map(I=>S(I.text,b,j,void 0,P))),s&&(e.resolveModuleNames=(u,b,P,j,O,I)=>u.every(A=>!l.some(H=>A.endsWith(H)))?s(u,b,P,j,O,I):u.map(A=>S(A,b,O,void 0,j).resolvedModule))}p&&(e.getProjectVersion=()=>p()+":"+i),e.getScriptSnapshot=S=>{let u=F(S);return u?u.snapshot:x(S)},E&&(e.getScriptKind=S=>{let u=F(S);return u?u.kind:E(S)});function F(S){let u=e.getScriptVersion(S);if(u!==h.get(S)?.[0]){let b=".ts",P,j=n.ScriptKind.TS,O=x(S);if(O){i++;let I=t.set(S,(0,Nn.resolveCommonLanguageId)(S),O);if(I.generated){let H=O.getText(0,O.getLength()).split(`
`).map(z=>" ".repeat(z.length)).join(`
`),k=I.generated.languagePlugin.typescript?.getScript(I.generated.code);k&&(b=k.extension,j=k.scriptKind,H+=k.code.snapshot.getText(0,k.code.snapshot.getLength())),P=n.ScriptSnapshot.fromString(H),I.generated.languagePlugin.typescript?.getExtraScripts&&console.warn("getExtraScripts() is not available in this use case.")}}else t.get(S)&&(i++,t.delete(S));P&&h.set(S,[u,{extension:b,snapshot:P,kind:j}])}return h.get(S)?.[1]}}ce.decorateLanguageServiceHost=tr;function nr(t,e,n){if(e.projectKind!==t.server.ProjectKind.Configured)return[];let i=e.getProjectName(),r=t.readJsonConfigFile(i,e.readFile.bind(e)),l={useCaseSensitiveFileNames:e.useCaseSensitiveFileNames(),fileExists:e.fileExists.bind(e),readFile:e.readFile.bind(e),readDirectory:(...o)=>(o[1]=n,e.readDirectory(...o))};return t.parseJsonSourceFileConfigFileContent(r,l,e.getCurrentDirectory()).fileNames}ce.searchExternalFiles=nr});var Lt=V(le=>{"use strict";Object.defineProperty(le,"__esModule",{value:!0});le.arrayItemsEqual=le.createLanguageServicePlugin=void 0;var rr=Mt(),At=Ot(),Dt=re(),Oe=new WeakMap,wt=new WeakMap,Pt=new WeakSet,Tt=new WeakSet;function ir(t){return e=>{let{typescript:n}=e;return{create(r){if(!Pt.has(r.languageService)&&!Tt.has(r.languageServiceHost)){Pt.add(r.languageService),Tt.add(r.languageServiceHost);let l=t(n,r),h=l.map(s=>s.typescript?.extraFileExtensions.map(p=>"."+p.extension)??[]).flat();wt.set(r.project,h);let o=r.languageServiceHost.getScriptSnapshot.bind(r.languageServiceHost),a=(0,Dt.createFileRegistry)(l,n.sys.useCaseSensitiveFileNames,s=>{let p=o(s);p?a.set(s,(0,Dt.resolveCommonLanguageId)(s),p):a.delete(s)});(0,rr.decorateLanguageService)(a,r.languageService),(0,At.decorateLanguageServiceHost)(a,r.languageServiceHost,n)}return r.languageService},getExternalFiles(r,l=0){if(l>=1||!Oe.has(r)){let h=Oe.get(r),o=(0,At.searchExternalFiles)(n,r,wt.get(r));Oe.set(r,o),h&&!Rt(h,o)&&r.refreshDiagnostics()}return Oe.get(r)}}}}le.createLanguageServicePlugin=ir;function Rt(t,e){if(t.length!==e.length)return!1;let n=new Set(t);for(let i of e)if(!n.has(i))return!1;return!0}le.arrayItemsEqual=Rt});var jt=V((Ae,It)=>{(function(t,e){typeof Ae=="object"&&typeof It<"u"?e(Ae):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.sourcemapCodec={}))})(Ae,function(t){"use strict";let e=",".charCodeAt(0),n=";".charCodeAt(0),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=new Uint8Array(64),l=new Uint8Array(128);for(let u=0;u<i.length;u++){let b=i.charCodeAt(u);r[u]=b,l[b]=u}let h=typeof TextDecoder<"u"?new TextDecoder:typeof Buffer<"u"?{decode(u){return Buffer.from(u.buffer,u.byteOffset,u.byteLength).toString()}}:{decode(u){let b="";for(let P=0;P<u.length;P++)b+=String.fromCharCode(u[P]);return b}};function o(u){let b=new Int32Array(5),P=[],j=0;do{let O=a(u,j),I=[],A=!0,H=0;b[0]=0;for(let k=j;k<O;k++){let z;k=s(u,k,b,0);let U=b[0];U<H&&(A=!1),H=U,p(u,k,O)?(k=s(u,k,b,1),k=s(u,k,b,2),k=s(u,k,b,3),p(u,k,O)?(k=s(u,k,b,4),z=[U,b[1],b[2],b[3],b[4]]):z=[U,b[1],b[2],b[3]]):z=[U],I.push(z)}A||x(I),P.push(I),j=O+1}while(j<=u.length);return P}function a(u,b){let P=u.indexOf(";",b);return P===-1?u.length:P}function s(u,b,P,j){let O=0,I=0,A=0;do{let k=u.charCodeAt(b++);A=l[k],O|=(A&31)<<I,I+=5}while(A&32);let H=O&1;return O>>>=1,H&&(O=-2147483648|-O),P[j]+=O,b}function p(u,b,P){return b>=P?!1:u.charCodeAt(b)!==e}function x(u){u.sort(E)}function E(u,b){return u[0]-b[0]}function F(u){let b=new Int32Array(5),P=1024*16,j=P-36,O=new Uint8Array(P),I=O.subarray(0,j),A=0,H="";for(let k=0;k<u.length;k++){let z=u[k];if(k>0&&(A===P&&(H+=h.decode(O),A=0),O[A++]=n),z.length!==0){b[0]=0;for(let U=0;U<z.length;U++){let J=z[U];A>j&&(H+=h.decode(I),O.copyWithin(0,j,A),A-=j),U>0&&(O[A++]=e),A=S(O,A,b,J,0),J.length!==1&&(A=S(O,A,b,J,1),A=S(O,A,b,J,2),A=S(O,A,b,J,3),J.length!==4&&(A=S(O,A,b,J,4)))}}}return H+h.decode(O.subarray(0,A))}function S(u,b,P,j,O){let I=j[O],A=I-P[O];P[O]=I,A=A<0?-A<<1|1:A<<1;do{let H=A&31;A>>>=5,A>0&&(H|=32),u[b++]=r[H]}while(A>0);return b}t.decode=o,t.encode=F,Object.defineProperty(t,"__esModule",{value:!0})})});var kt=V((we,De)=>{var sr=we&&we.__spreadArray||function(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,l;i<r;i++)(l||!(i in e))&&(l||(l=Array.prototype.slice.call(e,0,i)),l[i]=e[i]);return t.concat(l||Array.prototype.slice.call(e))};(function(t){if(typeof De=="object"&&typeof De.exports=="object"){var e=t(require,we);e!==void 0&&(De.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],t)})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=void 0;var n=function(){function a(s,p,x,E){this._uri=s,this._languageId=p,this._version=x,this._content=E,this._lineOffsets=void 0}return Object.defineProperty(a.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),a.prototype.getText=function(s){if(s){var p=this.offsetAt(s.start),x=this.offsetAt(s.end);return this._content.substring(p,x)}return this._content},a.prototype.update=function(s,p){for(var x=0,E=s;x<E.length;x++){var F=E[x];if(a.isIncremental(F)){var S=h(F.range),u=this.offsetAt(S.start),b=this.offsetAt(S.end);this._content=this._content.substring(0,u)+F.text+this._content.substring(b,this._content.length);var P=Math.max(S.start.line,0),j=Math.max(S.end.line,0),O=this._lineOffsets,I=l(F.text,!1,u);if(j-P===I.length)for(var A=0,H=I.length;A<H;A++)O[A+P+1]=I[A];else I.length<1e4?O.splice.apply(O,sr([P+1,j-P],I,!1)):this._lineOffsets=O=O.slice(0,P+1).concat(I,O.slice(j+1));var k=F.text.length-(b-u);if(k!==0)for(var A=P+1+I.length,H=O.length;A<H;A++)O[A]=O[A]+k}else if(a.isFull(F))this._content=F.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received")}this._version=p},a.prototype.getLineOffsets=function(){return this._lineOffsets===void 0&&(this._lineOffsets=l(this._content,!0)),this._lineOffsets},a.prototype.positionAt=function(s){s=Math.max(Math.min(s,this._content.length),0);var p=this.getLineOffsets(),x=0,E=p.length;if(E===0)return{line:0,character:s};for(;x<E;){var F=Math.floor((x+E)/2);p[F]>s?E=F:x=F+1}var S=x-1;return{line:S,character:s-p[S]}},a.prototype.offsetAt=function(s){var p=this.getLineOffsets();if(s.line>=p.length)return this._content.length;if(s.line<0)return 0;var x=p[s.line],E=s.line+1<p.length?p[s.line+1]:this._content.length;return Math.max(Math.min(x+s.character,E),x)},Object.defineProperty(a.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),a.isIncremental=function(s){var p=s;return p!=null&&typeof p.text=="string"&&p.range!==void 0&&(p.rangeLength===void 0||typeof p.rangeLength=="number")},a.isFull=function(s){var p=s;return p!=null&&typeof p.text=="string"&&p.range===void 0&&p.rangeLength===void 0},a}(),i;(function(a){function s(E,F,S,u){return new n(E,F,S,u)}a.create=s;function p(E,F,S){if(E instanceof n)return E.update(F,S),E;throw new Error("TextDocument.update: document must be created by TextDocument.create")}a.update=p;function x(E,F){for(var S=E.getText(),u=r(F.map(o),function(H,k){var z=H.range.start.line-k.range.start.line;return z===0?H.range.start.character-k.range.start.character:z}),b=0,P=[],j=0,O=u;j<O.length;j++){var I=O[j],A=E.offsetAt(I.range.start);if(A<b)throw new Error("Overlapping edit");A>b&&P.push(S.substring(b,A)),I.newText.length&&P.push(I.newText),b=E.offsetAt(I.range.end)}return P.push(S.substr(b)),P.join("")}a.applyEdits=x})(i||(e.TextDocument=i={}));function r(a,s){if(a.length<=1)return a;var p=a.length/2|0,x=a.slice(0,p),E=a.slice(p);r(x,s),r(E,s);for(var F=0,S=0,u=0;F<x.length&&S<E.length;){var b=s(x[F],E[S]);b<=0?a[u++]=x[F++]:a[u++]=E[S++]}for(;F<x.length;)a[u++]=x[F++];for(;S<E.length;)a[u++]=E[S++];return a}function l(a,s,p){p===void 0&&(p=0);for(var x=s?[p]:[],E=0;E<a.length;E++){var F=a.charCodeAt(E);(F===13||F===10)&&(F===13&&E+1<a.length&&a.charCodeAt(E+1)===10&&E++,x.push(p+E+1))}return x}function h(a){var s=a.start,p=a.end;return s.line>p.line||s.line===p.line&&s.character>p.character?{start:p,end:s}:a}function o(a){var s=h(a.range);return s!==a.range?{newText:a.newText,range:s}:a}})});var Ht=V(ue=>{"use strict";var or=ue&&ue.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ue,"__esModule",{value:!0});ue.astro2tsx=void 0;var qt=or(require("node:path")),ar=require("@astrojs/compiler/sync"),cr=jt(),Vt=kt();function lr(t,e){try{return(0,ar.convertToTSX)(t,{filename:e.filename})}catch(n){return console.error(`There was an error transforming ${e.filename} to TSX. An empty file will be returned instead. Please create an issue: https://github.com/withastro/language-tools/issues
Error: ${n}.`),{code:"",map:{file:e.filename??"",sources:[],sourcesContent:[],names:[],mappings:"",version:0},diagnostics:[{code:1e3,location:{file:e.filename,line:1,column:1,length:t.length},severity:1,text:"The Astro compiler encountered an unknown error while parsing this file. Please create an issue with your code and the error shown in the server's logs: https://github.com/withastro/language-tools/issues"}],metaRanges:{frontmatter:{start:0,end:0},body:{start:0,end:0}}}}}function ur(t,e){let n=lr(t,{filename:e});return{virtualFile:fr(t,n,e),diagnostics:n.diagnostics}}ue.astro2tsx=ur;function fr(t,e,n){e.code=dr(e.code,n);let i=(0,cr.decode)(e.map.mappings),r=Vt.TextDocument.create(n,"astro",0,t),l=Vt.TextDocument.create(n+".tsx","typescriptreact",0,e.code),h=[],o;for(let a=0;a<i.length;a++)for(let s of i[a]){let p=s[0],x=l.offsetAt({line:a,character:p});if(o){let E=x-o.genOffset,F=t.substring(o.sourceOffset,o.sourceOffset+E),S=e.code.substring(o.genOffset,o.genOffset+E);if(F!==S){E=0;for(let u=0;u<x-o.genOffset&&F[u]===S[u];u++)E=u+1}if(E>0){let u=h.length?h[h.length-1]:void 0;u&&u.generatedOffsets[0]+u.lengths[0]===o.genOffset&&u.sourceOffsets[0]+u.lengths[0]===o.sourceOffset?u.lengths[0]+=E:h.push({sourceOffsets:[o.sourceOffset],generatedOffsets:[o.genOffset],lengths:[E],data:{verification:!0,completion:!0,semantic:!0,navigation:!0,structure:!0,format:!1}})}o=void 0}if(s[2]!==void 0&&s[3]!==void 0){let E=r.offsetAt({line:s[2],character:s[3]});o={genOffset:x,sourceOffset:E}}}return{id:"tsx",languageId:"typescriptreact",snapshot:{getText:(a,s)=>e.code.substring(a,s),getLength:()=>e.code.length,getChangeRange:()=>{}},mappings:h,embeddedCodes:[]}}function dr(t,e){let n=qt.default.basename(e,qt.default.extname(e)),i=n.startsWith("[")&&n.endsWith("]");return t.replace(/\b(\S*)__AstroComponent_/gm,(r,l)=>l?i?`_${l}_`:l[0].toUpperCase()+l.slice(1):n==="404"?"FourOhFour":r)}});var Gt=V(fe=>{"use strict";Object.defineProperty(fe,"__esModule",{value:!0});fe.AstroVirtualCode=fe.getLanguageModule=void 0;var gr=re(),pr=Ht();function hr(){return{createVirtualCode(t,e,n){if(e==="astro"){let i=t;return new Pe(i,n)}},updateVirtualCode(t,e,n){return e.update(n),e},typescript:{extraFileExtensions:[{extension:"astro",isMixedContent:!0,scriptKind:7}],getScript(t){for(let e of(0,gr.forEachEmbeddedCode)(t))if(e.id==="tsx")return{code:e,extension:".tsx",scriptKind:4}}}}}fe.getLanguageModule=hr;var Pe=class{constructor(e,n){this.fileName=e,this.snapshot=n,this.id="root",this.languageId="astro",this.codegenStacks=[],this.onSnapshotUpdated()}update(e){this.snapshot=e,this.onSnapshotUpdated()}onSnapshotUpdated(){this.mappings=[{sourceOffsets:[0],generatedOffsets:[0],lengths:[this.snapshot.getLength()],data:{verification:!0,completion:!0,semantic:!0,navigation:!0,structure:!0,format:!1}}],this.embeddedCodes=[];let e=(0,pr.astro2tsx)(this.snapshot.getText(0,this.snapshot.getLength()),this.fileName);this.embeddedCodes.push(e.virtualFile)}};fe.AstroVirtualCode=Pe});var mr=Lt(),br=Gt();module.exports=(0,mr.createLanguageServicePlugin)(()=>[(0,br.getLanguageModule)()]);
